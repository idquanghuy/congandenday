{{> header }}
{{> navbar }}

<main class="container">
    <div class="mainbar"></div>
    <div class="row">
        <div class="col-md-12">
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title"><img src="../assets/images/photos/setting.png" alt="" style="width: 30px">
                        Cài Đặt Hệ Thống</h3>
                </div>
                <div class="card-body">
                    <form action="" method="post">
                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label for="" class="form-label">Tên Website</label>
                                    <input type="text" name="nameSite" value="{{ settings.nameSite }}"
                                        class="form-control" placeholder="Tên của trang web, ví dụ: CLMM.VN">
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label for="" class="form-label">Tiêu Đề</label>
                                    <input type="text" name="defaultTitle" value="{{ settings.defaultTitle }}"
                                        class="form-control" placeholder="Tiêu đề của trang web">
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label for="" class="form-label">Icon Website</label>
                                    <input type="text" name="favicon" value="{{ settings.favicon }}"
                                        class="form-control" placeholder="Icon của trang web">
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label for="" class="form-label">Thumbnail Website</label>
                                    <input type="text" name="thumbnail" value="{{ settings.thumbnail }}"
                                        class="form-control" placeholder="Hìn thu nhỏ của website">
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label for="" class="form-label">Mô Tả</label>
                                    <textarea name="description" rows="3" class="form-control"
                                        placeholder="Mô tả trang web">{{ settings.description }}</textarea>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label for="" class="form-label">Keywords</label>
                                    <textarea name="keywords" rows="3" class="form-control"
                                        placeholder="Từ khóa tìm kiếm của trang web">{{ settings.keywords }}</textarea>
                                </div>
                            </div>
                            <div class="col-md-12">
                                <div class="form-group">
                                    <label for="" class="form-label">Header Script</label>
                                    <textarea name="headerScript" rows="3" class="form-control"
                                        placeholder="Nhập script ở header, ví dụ: Google Analytics,....">{{
                                        settings.headerScript }}</textarea>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="form-group">
                                    <label for="" class="form-label">Số Lượng Hiển Thị</label>
                                    <input type="text" name="limitPhone" value="{{ settings.limitPhone }}"
                                        class="form-control" placeholder="Số lượng số điện thoại hiển thị, ex: 5">
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="form-group">
                                    <label for="" class="form-label">Nội Dung Nạp</label>
                                    <input type="text" name="paymentComment" value="{{ settings.paymentComment }}"
                                        class="form-control" placeholder="Nhập nội dung để phân biệt nạp tiền vào số">
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="form-group">
                                    <label for="" class="form-label">Nội Dung Rút</label>
                                    <input type="text" name="withdrawComment" value="{{ settings.withdrawComment }}"
                                        class="form-control" placeholder="Nhập nội dung để phân biệt khi rút tiền">
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="form-group">
                                    <label for="" class="form-label">Trạng Thái Site</label>
                                    <select name="siteStatus" class="form-control">
                                        {{#select settings.siteStatus}}
                                        <option value="active">Hoạt động</option>
                                        <option value="baotri">Bảo trì</option>
                                        {{/select }}
                                    </select>
                                </div>
                            </div>
                            <div class="col-md-12">
                                <div class="form-group">
                                    <label for="" class="form-label">Nhiệm Vụ Ngày</label>
                                    <select name="missionStatus" class="form-control">
                                        {{#select settings.missionData.status}}
                                        <option value="active">Bật</option>
                                        <option value="close">Tắt</option>
                                        {{/select}}
                                    </select>
                                </div>
                                <div class="table-responsive mb-3">
                                    <table
                                        class="table card-table table-vcenter text-nowrap table-bordered table-striped text-center"
                                        id="missionData">
                                        <thead class="badge-primary text-white">
                                            <tr>
                                                <th class="text-center text-white">Tổng cược ngày</th>
                                                <th class="text-center text-white">Tiền thưởng</th>
                                                <th class="text-center text-white add"><i
                                                        class="fas fa-plus-circle hand"></i></th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            {{#each settings.missionData.data}}
                                            <tr>
                                                <td class="amount">{{ numberFormat this.amount }}</td>
                                                <td class="bonus">{{ numberFormat this.bonus }}</td>
                                                <td>
                                                    <span class="badge badge-danger remove hand">
                                                        <i class="fa fa-times" aria-hidden="true"></i>
                                                    </span>
                                                    <span class="badge badge-primary edit hand">
                                                        <i class="fas fa-pen"></i>
                                                    </span>
                                                </td>
                                            </tr>

                                            {{/each}}
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                            <div class="col-md-12">
                                <div class="form-group">
                                    <label for="" class="form-label">TOP Tuần</label>
                                    <select name="topStatus" class="form-control">
                                        {{#select settings.topData.status}}
                                        <option value="active">Thưởng TOP</option>
                                        <option value="close">Fake TOP</option>
                                        {{/select}}
                                    </select>
                                </div>
                                <div class="table-responsive mb-3">
                                    <table
                                        class="table card-table table-vcenter text-nowrap table-bordered table-striped text-center"
                                        id="bonusData">
                                        <thead class="badge-primary text-white">
                                            <tr>
                                                <th class="text-center text-white">Vị trí</th>
                                                <th class="text-center text-white">Tiền thưởng</th>
                                                <th class="text-center text-white add"><i
                                                        class="fas fa-plus-circle hand"></i></th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            {{#each settings.topData.bonus}}
                                            <tr>
                                                <td class="top">{{ sum @index 1 }}</td>
                                                <td class="bonus">{{ numberFormat this }}</td>
                                                <td>
                                                    <span class="badge badge-danger remove hand">
                                                        <i class="fa fa-times" aria-hidden="true"></i>
                                                    </span>
                                                    <span class="badge badge-primary edit hand">
                                                        <i class="fa fa-pencil" aria-hidden="true"></i>
                                                    </span>
                                                </td>
                                            </tr>
                                            {{/each}}
                                        </tbody>
                                    </table>
                                </div>
                                <div class="table-responsive mb-3">
                                    <table
                                        class="table card-table table-vcenter text-nowrap table-bordered table-striped text-center"
                                        id="fakeData">
                                        <thead class="badge-primary text-white">
                                            <tr>
                                                <th class="text-center text-white">Vị trí</th>
                                                <th class="text-center text-white">Số điện thoại</th>
                                                <th class="text-center text-white">Tiền thắng</th>
                                                <th class="text-center text-white">Tiền thưởng</th>
                                                <th class="text-center text-white add"><i
                                                        class="fas fa-plus-circle hand"></i></th>
                                            </tr>
                                        </thead>
                                        <tbody>{{#each settings.topData.fakeData}}
                                            <tr>
                                                <td class="top">{{ sum @index 1 }}</td>
                                                <td class="phone">{{ this.phone }}</td>
                                                <td class="amount">{{ numberFormat this.amount }}</td>
                                                <td class="bonus">{{ numberFormat this.bonus }}</td>
                                                <td>
                                                    <span class="badge badge-danger remove hand">
                                                        <i class="fa fa-times" aria-hidden="true"></i>
                                                    </span>
                                                    <span class="badge badge-primary edit hand">
                                                        <i class="fas fa-pen"></i>
                                                    </span>
                                                </td>
                                            </tr>
                                            {{/each}}
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="form-group">
                                    <label for="" class="form-label">Kiểu Chạy</label>
                                    <select name="autoStatus" class="form-control">
                                        {{#select settings.history.autoStatus}}
                                        <option value="active">Auto Server</option>
                                        <option value="close">CronJobs</option>
                                        {{/select}}
                                    </select>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="form-group">
                                    <label for="" class="form-label">Loại API</label>
                                    <select name="typeAPI" class="form-control">
                                        {{#select settings.history.dataType}}
                                        <option value="history">Mặc định</option>
                                        <option value="noti">Thông báo</option>
                                        {{/select}}
                                    </select>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="form-group">
                                    <label for="" class="form-label">Giới Hạn Quét</label>
                                    <input type="number" name="limitGet" value="{{ settings.history.limit }}"
                                        class="form-control" placeholder="Giới hạn quét lịch sử mỗi lần"
                                        required="true">
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="form-group">
                                    <label for="" class="form-label">Thời Gian Quét (s)</label>
                                    <input type="number" name="timeGet" value="{{ settings.history.time }}"
                                        class="form-control" placeholder="Thời gian cách nhau mỗi lần quét (giây)"
                                        required="true">
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="form-group">
                                    <label for="" class="form-label">Hoàn Tiền</label>
                                    <select name="refundStatus" class="form-control">
                                        {{#select settings.refund.status}}
                                        <option value="active">Có</option>
                                        <option value="close">Không</option>
                                        {{/select}}
                                    </select>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="form-group">
                                    <label for="" class="form-label">Thắng Hoàn ( % )</label>
                                    <input type="number" name="refundWin" value="{{ settings.refund.win }}"
                                        class="form-control"
                                        placeholder="Nếu sai hạn mức mà mã thắng thì hoàn số phần trăm, sai nội dung sẽ hoàn 100%"
                                        required="true">
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="form-group">
                                    <label for="" class="form-label">Thua Hoàn ( % )</label>
                                    <input type="number" name="refundWon" value="{{ settings.refund.won }}"
                                        class="form-control"
                                        placeholder="Nếu sai hạn mức mà mã thua thì hoàn số phần trăm, sai nội dung sẽ hoàn 100%"
                                        required="true">
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="form-group">
                                    <label for="" class="form-label">Giới Hạn Hoàn</label>
                                    <input type="number" name="limitRefund" value="{{ settings.refund.limit }}"
                                        class="form-control" placeholder="Giới hạn số lần hoàn tiền trong 1 ngày"
                                        required="true">
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="form-group">
                                    <label for="" class="form-label">Nổ Hũ</label>
                                    <select name="jackpotStatus" class="form-control">
                                        {{#select settings.jackpot.status}}
                                        <option value="active">Bật</option>
                                        <option value="close">Tắt</option>
                                        {{/select}}
                                    </select>
                                </div>
                            </div>
                            <div class="col-md-5">
                                <div class="form-group">
                                    <label for="" class="form-label">Mã Nổ Hũ</label>
                                    <input type="text" name="jackpotTLS"
                                        value="{{ joinArray settings.jackpot.numberTLS ' - '}}" class="form-control"
                                        placeholder="Mã số cuối trúng nổ hũ, mỗi số cách nhau ' - '">
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="form-group">
                                    <label for="" class="form-label">Tiền Trừ Hũ</label>
                                    <input type="text" name="jackpotAmount" value="{{ settings.jackpot.amount }}"
                                        class="form-control" placeholder="Tiền trừ hũ mỗi lần chơi thắng">
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="form-group">
                                    <label for="" class="form-label">Điểm Danh</label>
                                    <select name="muster-status" class="form-control">
                                        {{#select settings.muster.status}}
                                        <option value="active">Bật</option>
                                        <option value="close">Tắt</option>
                                        {{/select}}
                                    </select>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="form-group">
                                    <label for="" class="form-label">Tối Thiểu ( MUSTER )</label>
                                    <input type="number" name="muster-min" value="{{ settings.muster.min }}"
                                        class="form-control" placeholder="Thưởng điểm danh tối thiểu">
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="form-group">
                                    <label for="" class="form-label">Tối Đa ( MUSTER )</label>
                                    <input type="number" name="muster-max" value="{{ settings.muster.max }}"
                                        class="form-control" placeholder="Thưởng điểm danh tối đa">
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="form-group">
                                    <label for="" class="form-label">Giới Hạn ( MUSTER )</label>
                                    <input type="number" name="muster-limit" value="{{ settings.muster.limit }}"
                                        class="form-control" placeholder="Tối thiểu bao nhiêu người chơi mới thưởng">
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="form-group">
                                    <label for="" class="form-label">Bắt Đầu ( MUSTER )</label>
                                    <input type="number" name="muster-startTime" value="{{ settings.muster.startTime }}"
                                        class="form-control" placeholder="Điểm danh bắt đầu từ lúc mấy giờ">
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="form-group">
                                    <label for="" class="form-label">Kết Thúc ( MUSTER )</label>
                                    <input type="number" name="muster-endTime" value="{{ settings.muster.endTime }}"
                                        class="form-control" placeholder="Kết thúc vào lúc mấy giờ">
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="form-group">
                                    <label for="" class="form-label">Thời Gian ( MUSTER )</label>
                                    <input type="number" name="muster-delay" value="{{ settings.muster.delay }}"
                                        class="form-control" placeholder="Bao nhiêu giây cho 1 phiên quay thưởng">
                                </div>
                            </div>
                            <div class="col-md-12">
                                <div class="form-group">
                                    <label for="" class="form-label">Lưu ý ( MUSTER ) </label>
                                    <textarea name="muster-noti" class="form-control" placeholder="Lưu ý điểm danh">{{
                                        settings.muster.noti
                                        }}</textarea>
                                </div>
                            </div>
                            <div class="col-md-12">
                                <div class="form-group">
                                    <label for="" class="form-label">Thông Báo</label>
                                    <select name="notiStatus" class="form-control">
                                        {{#select settings.notification.status}}
                                        <option value="active">Bật</option>
                                        <option value="close">Tắt</option>
                                        {{/select}}
                                    </select>
                                </div>
                            </div>
                            <div class="col-md-12">
                                <div class="form-group">
                                    <label for="" class="form-label">Nội Dung Thông Báo</label>
                                    <textarea name="notiData" class="form-control"
                                        placeholder="Nhập nội dung thông báo modal popup">{{ settings.notification.data
                                        }}</textarea>
                                </div>
                            </div>
                            <div class="col-md-12">
                                <div class="form-group">
                                    <label for="" class="form-label">Lưu ý</label>
                                    <textarea name="gameNote" class="form-control" placeholder="Lưu ý mini game">{{
                                        settings.gameNote }}</textarea>
                                </div>
                            </div>
                            <div class="col-md-12">
                                <div class="text-center">
                                    <button class="btn btn-block btn-primary">Lưu</button>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</main>
{{> footer }}
<script type="text/javascript">
    $(document).ready(function () {
        $('textarea[name="gameNote"]').richText();
        $('textarea[name="notiData"]').richText();
        $('textarea[name="muster-noti"]').richText();

        $('body').on('click', '#missionData>tbody>tr>td>span.remove', function (e) {
            $(this).parent().parent().remove();
        })

        $('body').on('click', '#bonusData>tbody>tr>td>span.remove', function (e) {
            $(this).parent().parent().remove();
            resetTOP('#bonusData');
        })

        $('body').on('click', '#fakeData>tbody>tr>td>span.remove', function (e) {
            $(this).parent().parent().remove();
            resetTOP('#fakeData');
        })

        $('body').on('click', '#missionData>tbody>tr>td>span.save', function (e) {
            let amount = $(this).parent().parent().find('td>input.amount').val();
            let bonus = $(this).parent().parent().find('td>input.bonus').val();

            if (!amount || !bonus) return $(this).parent().parent().remove();
            console.log(amount, bonus);

            $('#missionData>tbody').append(`<tr><td class="amount">${Intl.NumberFormat('en-US').format(amount)}</td><td class="bonus">${Intl.NumberFormat('en-US').format(bonus)}</td><td><span class="badge badge-danger remove hand"><i class="fa fa-times" aria-hidden="true"></i></span> <span class="badge badge-primary edit hand"><i class="fa fa-pencil" aria-hidden="true"></i></span></td></tr>`)
            $(this).parent().parent().remove();
        })

        $('body').on('click', '#bonusData>tbody>tr>td>span.save', function (e) {
            let bonus = $(this).parent().parent().find('td>input.bonus').val();
            if (!bonus) return $(this).parent().parent().remove();
            console.log(bonus);

            $('#bonusData>tbody').append(`<tr><td class="top"></td><td class="bonus">${Intl.NumberFormat('en-US').format(bonus)}</td><td><span class="badge badge-danger remove hand"><i class="fa fa-times" aria-hidden="true"></i></span> <span class="badge badge-primary edit hand"><i class="fa fa-pencil" aria-hidden="true"></i></span></td></tr>`)
            $(this).parent().parent().remove();

            resetTOP('#bonusData');
        })

        $('body').on('click', '#fakeData>tbody>tr>td>span.save', function (e) {
            let phone = $(this).parent().parent().find('td>input.phone').val();
            let amount = $(this).parent().parent().find('td>input.amount').val();
            let bonus = $(this).parent().parent().find('td>input.bonus').val();

            if (!phone || !amount || !bonus) return $(this).parent().parent().remove();
            console.log(phone, amount, bonus);

            $('#fakeData>tbody').append(`<tr><td class="top"></td><td class="phone">${phone}</td><td class="amount">${Intl.NumberFormat('en-US').format(amount)}</td><td class="bonus">${Intl.NumberFormat('en-US').format(bonus)}</td><td><span class="badge badge-danger remove hand"><i class="fa fa-times" aria-hidden="true"></i></span> <span class="badge badge-primary edit hand"><i class="fa fa-pencil" aria-hidden="true"></i></span></td></tr>`)
            $(this).parent().parent().remove();

            resetTOP('#fakeData');
        })

        $('body').on('click', '#fakeData>tbody>tr>td>span.edit', function (e) {
            let _this = $(this).parent().parent();
            let phone = _this.find('td.phone').text();
            let amount = _this.find('td.amount').text().replace(/\D/g, '');
            let bonus = _this.find('td.bonus').text().replace(/\D/g, '');

            _this.html(`<td colspan="2"><input type="text" class="form-control phone" value="${phone}" placeholder="Nhập số điện thoại pha ke, ví dụ: 098268****" /></td><td><input type="number" class="form-control amount" value="${amount}" placeholder="Nhập số tiền thắng cược pha ke" /></td><td><input type="number" class="form-control bonus" value="${bonus}" placeholder="Nhập số tiền thưởng pha ke" /></td><td><span class="badge badge-success save-edit hand"><i class="fas fa-save"></i></span></td>`)
        })

        $('body').on('click', '#fakeData>tbody>tr>td>span.save-edit', function (e) {
            let _this = $(this).parent().parent();
            let phone = _this.find('input.phone').val();
            let amount = _this.find('input.amount').val();
            let bonus = _this.find('input.bonus').val();

            _this.html(`<td class="top">1</td><td class="phone">${phone}</td><td class="amount">${Intl.NumberFormat('en-US').format(amount)}</td><td class="bonus">${Intl.NumberFormat('en-US').format(bonus)}</td><td><span class="badge badge-danger remove hand"><i class="fa fa-times" aria-hidden="true"></i></span> <span class="badge badge-primary edit hand"><i class="fa fa-pencil" aria-hidden="true"></i></span></td>`)
            resetTOP('#fakeData');
        })

        $('body').on('click', '#missionData>tbody>tr>td>span.edit', function (e) {
            let _this = $(this).parent().parent();
            let amount = _this.find('td.amount').text().replace(/\D/g, '');
            let bonus = _this.find('td.bonus').text().replace(/\D/g, '');

            _this.html(`<td><input type="number" class="form-control amount" value="${amount}" placeholder="Nhập số tiền tổng cược của 1 ngày"></td><td><input type="number" class="form-control bonus" value="${bonus}" placeholder="Nhập số tiền thưởng"></td><td><span class="badge badge-success save-edit hand"><i class="fas fa-save"></i></span></td>`)
        })

        $('body').on('click', '#missionData>tbody>tr>td>span.save-edit', function (e) {
            let _this = $(this).parent().parent();
            let amount = _this.find('input.amount').val();
            let bonus = _this.find('input.bonus').val();
            _this.html(`<td class="amount">${Intl.NumberFormat('en-US').format(amount)}</td><td class="bonus">${Intl.NumberFormat('en-US').format(bonus)}</td><td><span class="badge badge-danger remove hand"><i class="fa fa-times" aria-hidden="true"></i></span> <span class="badge badge-primary edit hand"><i class="fas fa-pen"></i></span></td>`)
        })

        $('body').on('click', '#bonusData>tbody>tr>td>span.edit', function (e) {
            let _this = $(this).parent().parent();
            let bonus = _this.find('td.bonus').text().replace(/\D/g, '');

            _this.html(`<td colspan="2"><input type="number" class="form-control bonus" value="${bonus}" placeholder="Nhập số tiền thưởng top tiếp theo"></td><td><span class="badge badge-success save-edit hand"><i class="fas fa-save"></i></span></td>`)
        })

        $('body').on('click', '#bonusData>tbody>tr>td>span.save-edit', function (e) {
            let _this = $(this).parent().parent();
            let bonus = _this.find('input.bonus').val();

            _this.html(`<td class="top">1</td><td class="bonus">${Intl.NumberFormat('en-US').format(bonus)}</td><td><span class="badge badge-danger remove hand"><i class="fa fa-times" aria-hidden="true"></i></span> <span class="badge badge-primary edit hand"><i class="fa fa-pencil" aria-hidden="true"></i></span></td>`)
            resetTOP('#bonusData');
        })

        $('#missionData>thead>tr>th.add').on('click', (e) => $('#missionData>tbody').append(`<tr><td><input type="number" class="form-control amount" placeholder="Nhập số tiền tổng cược của 1 ngày" /></td><td><input type="number" class="form-control bonus" placeholder="Nhập số tiền thưởng" /></td><td><span class="badge badge-success save hand"><i class="fas fa-save"></i></span></td></tr>`))

        $('#bonusData>thead>tr>th.add').on('click', (e) => $('#bonusData>tbody').append(`<tr><td colspan="2"><input type="number" class="form-control bonus" placeholder="Nhập số tiền thưởng top tiếp theo" /></td><td><span class="badge badge-success save hand"><i class="fas fa-save"></i></span></td></tr>`))

        $('#fakeData>thead>tr>th.add').on('click', (e) => $('#fakeData>tbody').append(`<tr><td colspan="2"><input type="text" class="form-control phone" placeholder="Nhập số điện thoại pha ke, ví dụ: 098268****" /></td><td><input type="number" class="form-control amount" placeholder="Nhập số tiền thắng cược pha ke" /></td><td><input type="number" class="form-control bonus" placeholder="Nhập số tiền thưởng pha ke" /></td><td><span class="badge badge-success save hand"><i class="fas fa-save"></i></span></td></tr>`))

        function resetTOP(element) {
            $(`${element}>tbody>tr>td.top`).each(function (index) {
                $(this).html(`${index + 1}`)
            })
        }

        $('form').submit(function (e) {
            e.preventDefault();

            let nameSite = $('[name="nameSite"]').val(), defaultTitle = $('[name="defaultTitle"]').val(), description = $('textarea[name="description"]').val(), keywords = $('textarea[name="keywords"]').val(), headerScript = $('textarea[name="headerScript"]').val(), favicon = $('[name="favicon"]').val(), thumbnail = $('[name="thumbnail"]').val(), gameNote = $('[name="gameNote"]').val(), limitPhone = $('[name="limitPhone"]').val(), paymentComment = $('[name="paymentComment"]').val(), withdrawComment = $('[name="withdrawComment"]').val(), siteStatus = $('[name="siteStatus"]').val();

            let missionData = {
                status: 'active',
                data: []
            };

            let topData = {
                status: 'active',
                bonus: [],
                fakeData: []
            }

            let history = {
                autoStatus: 'active',
                dataType: 'history',
                limit: 10,
                time: 30
            }

            let refund = {
                status: 'active',
                win: 100,
                won: 50,
                limit: 10
            }

            let jackpot = {
                status: 'close',
                numberTLS: [111, 222, 333, 444, 555, 666, 777, 888, 999],
                amount: 10000
            }

            let muster = {
                status: 'active',
                min: 5000,
                max: 100000,
                delay: 600,
                limit: 10,
                startTime: 7,
                endTime: 23,
                noti: ''
            }

            let notification = {
                status: 'active',
                data: ''
            }

            missionData.status = $(this).find('[name="missionStatus"]').val();
            $('#missionData>tbody>tr').each(function () {
                let amount = $(this).find('td.amount').text().replace(/\D/g, '');
                let bonus = $(this).find('td.bonus').text().replace(/\D/g, '');
                missionData.data.push({
                    amount: Number(amount),
                    bonus: Number(bonus)
                })
            })

            topData.status = $(this).find('[name="topStatus"]').val();
            $('#bonusData>tbody>tr').each(function () {
                let bonus = $(this).find('td.bonus').text().replace(/\D/g, '');
                topData.bonus.push(Number(bonus))
            })

            $('#fakeData>tbody>tr').each(function () {
                let phone = $(this).find('td.phone').text();
                let amount = $(this).find('td.amount').text().replace(/\D/g, '');
                let bonus = $(this).find('td.bonus').text().replace(/\D/g, '');
                topData.fakeData.push({
                    phone,
                    amount: Number(amount),
                    bonus: Number(bonus)
                })
            })

            history.autoStatus = $('[name="autoStatus"]').val();
            history.dataType = $('[name="typeAPI"]').val();
            history.limit = Number($('[name="limitGet"]').val());
            history.time = Number($('[name="timeGet"]').val());

            refund.status = $('[name="refundStatus"]').val();
            refund.win = Number($('[name="refundWin"]').val());
            refund.won = Number($('[name="refundWon"]').val());
            refund.limit = Number($('[name="limitRefund"]').val());

            notification.status = $('[name="notiStatus"]').val();
            notification.data = $('[name="notiData"]').val();

            jackpot.status = $('[name="jackpotStatus"]').val();
            jackpot.numberTLS = $('[name="jackpotTLS"]').val().replace(/\s+/g, '').split('-').filter(item => item);
            jackpot.amount = $('[name="jackpotAmount"]').val();

            muster.min = Number($('[name="muster-min"]').val());
            muster.max = Number($('[name="muster-max"]').val());
            muster.limit = Number($('[name="muster-limit"]').val());
            muster.delay = $('[name="muster-delay"]').val();
            muster.noti = $('[name="muster-noti"]').val();
            muster.startTime = $('[name="muster-startTime"]').val();
            muster.endTime = $('[name="muster-endTime"]').val();
            muster.status = $('[name="muster-status"]').val();

            $.ajax({
                url: '',
                method: 'PUT',
                dataType: 'json',
                data: {
                    nameSite, defaultTitle, description, keywords, headerScript, favicon, thumbnail, gameNote, limitPhone, paymentComment, withdrawComment, missionData, topData, history, refund, notification, jackpot, muster, siteStatus
                },
                beforeSend: () => wait(),
                success: (res) => {
                    wait('stop');
                    !res.success ? Swal.fire('Thông báo', res.message, 'error') : Swal.fire('Thông báo', res.message, 'success') && setTimeout(() => window.location.reload(), 1500);
                }
            })
        })
    })
</script>