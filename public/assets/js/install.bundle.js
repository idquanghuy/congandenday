$(document).ready((function(){function t(t){$(`${t}>tbody>tr>td.top`).each((function(t){$(this).html(`${t+1}`)}))}$("#checkTOKEN button").click((function(t){if(localStorage.getItem("TOKEN_SETUP"))return $.growl.warning({title:"<center>Warning!</center>",message:"<center>Token installed, reload!</center>"}),setTimeout((()=>window.location.reload()),1500);let e=$('#checkTOKEN input[name="TOKEN_SETUP"]').val().trim();if(!e||!/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/gi.test(e))return $.growl.warning({title:"<center>Warning!</center>",message:"<center>Invaild Token Setup!</center>"});fetch("../install/"+e).then((t=>t.json())).then((t=>{if(!t.success)return $.growl.error({title:"<center>Error!</center>",message:`<center>${t.message}</center>`});$.growl.notice({title:"<center>Success!</center>",message:`<center>${t.message}</center>`}),localStorage.setItem("TOKEN_SETUP",e),setTimeout((()=>window.location.reload()),1e3)}))})),$("#createAuth button").click((function(t){let e=localStorage.getItem("TOKEN_SETUP");if(!e)return $.growl.error({title:"<center>Error!</center>",message:"<center>Token Setup Not Found!</center>"});let a=$('#createAuth input[name="name"]').val(),n=$('#createAuth input[name="username"]').val(),s=$('#createAuth input[name="password"]').val();if(!a||!n||!s)return $.growl.warning({title:"<center>Warning!</center>",message:"<center>Vui lòng điền đầy đủ thông tin!</center>"});$.post("../adminPanel/register",{name:a,username:n,password:s,TOKEN_SETUP:e},(function(t){if(!t.success)return $.growl.error({title:"<center>Error!</center>",message:`<center>${t.message}</center>`});$.growl.notice({title:"<center>Success!</center>",message:`<center>${t.message}</center>`}),setTimeout((()=>window.location.reload()),2e3)}))})),$("#createSetting form").submit((function(t){t.preventDefault();let e=localStorage.getItem("TOKEN_SETUP");if(!e)return $.growl.error({title:"<center>Error!</center>",message:"<center>Token Setup Not Found!</center>"});let a=$('[name="nameSite"]').val(),n=$('[name="defaultTitle"]').val(),s=$('textarea[name="description"]').val(),r=$('textarea[name="keywords"]').val(),o=$('[name="favicon"]').val(),i=$('[name="thumbnail"]').val(),c=$('[name="gameNote"]').val(),l=$('[name="limitPhone"]').val(),d=$('[name="paymentComment"]').val(),u=$('[name="withdrawComment"]').val(),m=$('[name="siteStatus"]').val(),p={status:"active",data:[]},f={status:"active",bonus:[],fakeData:[]},h={autoStatus:"active",dataType:"history",limit:10,time:30},b={status:"active",win:100,won:50,limit:10},v={status:"active",data:""};p.status=$(this).find('[name="missionStatus"]').val(),$("#missionData>tbody>tr").each((function(){let t=$(this).find("td.amount").text().replace(/\D/g,""),e=$(this).find("td.bonus").text().replace(/\D/g,"");p.data.push({amount:Number(t),bonus:Number(e)})})),f.status=$(this).find('[name="topStatus"]').val(),$("#bonusData>tbody>tr").each((function(){let t=$(this).find("td.bonus").text().replace(/\D/g,"");f.bonus.push(Number(t))})),$("#fakeData>tbody>tr").each((function(){let t=$(this).find("td.phone").text(),e=$(this).find("td.amount").text().replace(/\D/g,""),a=$(this).find("td.bonus").text().replace(/\D/g,"");f.fakeData.push({phone:t,amount:Number(e),bonus:Number(a)})})),h.autoStatus=$('[name="autoStatus"]').val(),h.dataType=$('[name="typeAPI"]').val(),h.limit=Number($('[name="limitGet"]').val()),h.time=Number($('[name="timeGet"]').val()),b.status=$('[name="refundStatus"]').val(),b.win=Number($('[name="refundWin"]').val()),b.won=Number($('[name="refundWon"]').val()),b.limit=Number($('[name="limitRefund"]').val()),v.status=$('[name="notiStatus"]').val(),v.data=$('[name="notiData"]').val(),$.post("../install",{TOKEN_SETUP:e,nameSite:a,defaultTitle:n,description:s,keywords:r,favicon:o,thumbnail:i,gameNote:c,limitPhone:l,paymentComment:d,withdrawComment:u,missionData:p,topData:f,history:h,refund:b,notification:v,siteStatus:m},(function(t){if(!t.success)return $.growl.error({title:"<center>Error!</center>",message:`<center>${t.message}</center>`});$.growl.notice({title:"<center>Success!</center>",message:`<center>${t.message}</center>`}),setTimeout((()=>window.location.href="../adminPanel"),1500)}))})),$("body").on("click","#missionData>tbody>tr>td.remove",(function(t){$(this).parent().remove()})),$("body").on("click","#bonusData>tbody>tr>td.remove",(function(e){$(this).parent().remove(),t("#bonusData")})),$("body").on("click","#fakeData>tbody>tr>td.remove",(function(e){$(this).parent().remove(),t("#fakeData")})),$("body").on("click","#missionData>tbody>tr>td.save",(function(t){let e=$(this).parent().find("td>input.amount").val(),a=$(this).parent().find("td>input.bonus").val();if(!e||!a)return $(this).parent().remove();console.log(e,a),$("#missionData>tbody").append(`<tr><td class="amount">${Intl.NumberFormat("en-US").format(e)}</td><td class="bonus">${Intl.NumberFormat("en-US").format(a)}</td><td class="remove"><span class="text-danger hand"><i class="fa fa-times" aria-hidden="true"></i></span></td></tr>`),$(this).parent().remove()})),$("body").on("click","#bonusData>tbody>tr>td.save",(function(e){let a=$(this).parent().find("td>input.bonus").val();if(!a)return $(this).parent().remove();console.log(a),$("#bonusData>tbody").append(`<tr><td class="top"></td><td class="bonus">${Intl.NumberFormat("en-US").format(a)}</td><td class="remove"><span class="text-danger hand"><i class="fa fa-times" aria-hidden="true"></i></span></td></tr>`),$(this).parent().remove(),t("#bonusData")})),$("body").on("click","#fakeData>tbody>tr>td.save",(function(e){let a=$(this).parent().find("td>input.phone").val(),n=$(this).parent().find("td>input.amount").val(),s=$(this).parent().find("td>input.bonus").val();if(!a||!n||!s)return $(this).parent().remove();console.log(a,n,s),$("#fakeData>tbody").append(`<tr><td class="top"></td><td class="phone">${a}</td><td class="amount">${Intl.NumberFormat("en-US").format(n)}</td><td class="bonus">${Intl.NumberFormat("en-US").format(s)}</td><td class="remove"><span class="text-danger hand"><i class="fa fa-times" aria-hidden="true"></i></span></td></tr>`),$(this).parent().remove(),t("#fakeData")})),$("#missionData>thead>tr>th.add").on("click",(t=>$("#missionData>tbody").append('<tr><td><input type="number" class="form-control amount" placeholder="Nhập số tiền tổng cược của 1 ngày" /></td><td><input type="number" class="form-control bonus" placeholder="Nhập số tiền thưởng" /></td><td class="save"><span class="text-success hand"><i class="fas fa-save"></i></span></td></tr>'))),$("#bonusData>thead>tr>th.add").on("click",(t=>$("#bonusData>tbody").append('<tr><td colspan="2"><input type="number" class="form-control bonus" placeholder="Nhập số tiền thưởng top tiếp theo" /></td><td class="save"><span class="text-success hand"><i class="fas fa-save"></i></span></td></tr>'))),$("#fakeData>thead>tr>th.add").on("click",(t=>$("#fakeData>tbody").append('<tr><td colspan="2"><input type="text" class="form-control phone" placeholder="Nhập số điện thoại pha ke, ví dụ: 098268****" /></td><td><input type="number" class="form-control amount" placeholder="Nhập số tiền thắng cược pha ke" /></td><td><input type="number" class="form-control bonus" placeholder="Nhập số tiền thưởng pha ke" /></td><td class="save"><span class="text-success hand"><i class="fas fa-save"></i></span></td></tr>')))}));